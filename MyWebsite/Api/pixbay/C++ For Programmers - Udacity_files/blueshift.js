!function(){function e(){T.slots=[];for(var e=document.querySelectorAll("[data-bsft-slot]"),t=0;t<e.length;t++)T.slots.push({name:e[t].dataset.bsftSlot,el:e[t]})}function t(e,t){t.tz=T.tz;var n={x:T.eventApiKey,slot:e,user:T.userParams,context:t};return"true"==i("dev")&&(n.dev=!0),JSON.stringify(n)}function n(){for(var e=[],n=0;n<T.slots.length;n++)!function(n){e[n]=p(),e[n].open("POST",_+"live",!0),e[n].setRequestHeader("Content-Type","application/json"),e[n].onreadystatechange=function(){if(4===e[n].readyState&&200==e[n].status){try{var t=JSON.parse(e[n].responseText)}catch(e){console.log("error loading slot",e)}t&&t.show&&o(T.slots[n].el,t.width,t.height,t.content)}},e[n].send(t(T.slots[n].name,T.slotParams[T.slots[n].name]||{}))}(n)}function o(e,t,n,o){var r=document.createElement("iframe");e.innerHTML="",e.appendChild(r),r.src="javascript:''",r.style.width=t,r.style.height=n,r.style.border="none",r.contentWindow.document.open(),r.contentWindow.document.write(o),r.contentWindow.document.close(),e.style.width=t,e.style.height=n,e.style.display="block"}function r(t){e(),T.slotParams=t||{},n()}function i(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function a(e){for(var t=[];null!=e.parentNode;){for(var n=0,o=0,r=0;r<e.parentNode.childNodes.length;r++){var i=e.parentNode.childNodes[r];i.nodeName==e.nodeName&&(i===e&&(o=n),n++)}""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+"["+o+"]"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t}function s(e,t){var n=document.getElementById(e);O(n,"change",function(){k({0:"icapture",1:t,2:document.getElementById(e).value})},!1)}function c(e){new Image(1,1).src=e}function u(e){try{if(void 0!=m("_bs_fb_pushed"))return;request=R+"?x="+window._blueshiftid+"&k="+e;var t=p();t.open("GET",request,!0),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&f(JSON.parse(t.responseText))},t.send(request)}catch(e){}}function d(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function f(e){if(d(e))return!0;window._fbq=window._fbq||[],window._fbq.push(["track","user_attributes",e]),w("_bs_fb_pushed","1",1)}function l(e){try{xhr=p(),xhr.open("GET",e,!0),xhr.send(e)}catch(e){}}function p(){if(window.XMLHttpRequest)try{e=new XMLHttpRequest}catch(t){var e=new window.ActiveXObject("Microsoft.XMLHTTP")}return e}function h(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(t){e=""}}return""===e&&(e=document.referrer),e}function w(e,t,n){var o=new Date;o.setDate(o.getDate()+n);var r=window.location.hostname,i=r.split(".");4==i.length&&i[0]>=0&&i[0]<=255&&i[1]>=0&&i[1]<=255&&i[2]>=0&&i[2]<=255&&i[3]>=0&&i[3]<=255||(r="."+r.replace(/^www./,""));var a=escape(t)+(null==n?"":";expires="+o.toUTCString())+";path=/;domain="+r;document.cookie=e+"="+a}function m(e){var t,n,o,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(o)}function g(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function y(e){var t=e[0],n=h(),o=Math.floor(1e6*Math.random()+1),r=Math.round(new Date/1e3),i=m("_bs");if("object"==typeof analytics&&"function"==typeof analytics.user){var a=analytics.user().anonymousId();i!=a&&w("_bs",a,365),i=a}if(void 0==i&&w("_bs",i=g(),365),"config"==t&&e[1])return(S=e[1]).trackClicks&&x(),!0;if("identify"==t&&(T.userParams=e[1]||{},T.userParams.cookie=i),"track"==t)t=e[1],e=e[2];else{if("capture"==t)return s(e[1],e[2]),!0;if("retarget"==t)return req=U+I+"?t="+r+"&e=appnexus&z="+o+"&x="+window._blueshiftid+"&k="+i+"&appnexus_id=$UID&u="+encodeURIComponent(encodeURIComponent(window.location.href))+"&r="+encodeURIComponent(encodeURIComponent(n)),c(req),!0;if("facebook"==t)return L=!0,!0;"icapture"==t?(t="capture",d=e[1],value=e[2],(e={})[d]=value):e=e[1]}req=I+"?t="+r+"&e="+t+"&r="+encodeURIComponent(n)+"&z="+o+"&x="+window._blueshiftid+"&k="+i+"&u="+encodeURIComponent(window.location.href);for(var d in e)v=e[d],"object"==typeof v?req+="&"+d+"_json="+encodeURIComponent(JSON.stringify(v)):req+="&"+d+"="+encodeURIComponent(v);return M?l(req):c(req),1==L&&"pageload"==t&&u(i),1==E&&"pageload"==t&&(req=U+I+"?t="+r+"&e=appnexus&z="+o+"&x="+window._blueshiftid+"&k="+i+"&appnexus_id=$UID&u="+encodeURIComponent(encodeURIComponent(window.location.href))+"&r="+encodeURIComponent(encodeURIComponent(n)),c(req)),1==L&&"pageload"==t&&u(i),!0}function b(e,t){setTimeout(function(){k(e)},t)}function k(e){if(void 0!=e[0])if(N)if("identify"!==e[0])if(T.userParams.cookie||new Date-C>1e3)switch(e[0]){case"live":r(e[1]);break;default:y(e)}else b(e,20);else y(e);else b(e,20)}function q(){N=!0,C=new Date,T.eventApiKey=_blueshiftid}function x(){O(document,"click",function(e){e=e||window.event,element=e.target||e.srcElement,element.href&&k(["click",{p:a(element).toString(),c:element.href,a:element.innerHTML}])})}var C,_=("https:"===document.location.protocol?"https:":"http:")+"//api.getblueshift.com/",I=_+"unity.gif",R=_+"cookiejar.json",U=("https:"===document.location.protocol?"https:":"http:")+"//ib.adnxs.com/getuid?",N=!1,E=!1,L=!1,M="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,S={},T={eventApiKey:void 0,userParams:{},slots:[],slotParams:{},tz:(new Date).getTimezoneOffset()};if("object"==typeof blueshift){var P=void 0===blueshift.slice?[]:blueshift.slice(0);for(blueshift={events:[],load:function(){q()},capture:function(e,t){s(e,t)},retarget:function(){k(["retarget"])},facebook:function(){k(["facebook"])},track:function(e,t){k(["track",e,t])},pageload:function(e){k(["pageload",e])},identify:function(e){k(["identify",e])},live:function(e){k(["live",e])}},j=0;j<P.length;j++)blueshift.events.push(P[j])}if(document.addEventListener)O=function(e,t,n){e.addEventListener(t,n,!1)};else var O=function(e,t,n){e.attachEvent("on"+t,n)};for(var j=0;j<blueshift.events.length;j++)k(blueshift.events[j]);"complete"===document.readyState?q():window.addEventListener?window.addEventListener("load",q,!1):window.attachEvent&&window.attachEvent("onload",q)}();